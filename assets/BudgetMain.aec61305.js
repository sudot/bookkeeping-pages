import{c as P,K as F,bl as I,L as M,bm as E,a as r,b as f,A as V,g as j,r as W,w as A,ab as B,f as g,j as h,k as l,m as t,Q as y,E as G,H,F as K,a0 as T,a2 as X,a3 as $,q as J,t as b,s as S,b2 as C,G as v}from"./index.46a27899.js";import{Q as O,a as q}from"./QItemLabel.0564320f.js";import{Q as R}from"./QPage.7824d0da.js";import{u as U}from"./use-quasar.20dd07d7.js";import{m as x,b as Q}from"./currency.9051c79a.js";import{u as Y,f as Z,g as ee}from"./budget.2007ba51.js";import"./currency.es.c7e1cdbb.js";const ae={xs:2,sm:4,md:6,lg:10,xl:14};function p(e,o,n){return{transform:o===!0?`translateX(${n.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var te=P({name:"QLinearProgress",props:{...F,...I,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:o}){const{proxy:n}=j(),c=M(e,n.$q),d=E(e,ae),m=r(()=>e.indeterminate===!0||e.query===!0),s=r(()=>e.reverse!==e.query),u=r(()=>({...d.value!==null?d.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),i=r(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),_=r(()=>p(e.buffer!==void 0?e.buffer:1,s.value,n.$q)),a=r(()=>`with${e.instantFeedback===!0?"out":""}-transition`),w=r(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${a.value} q-linear-progress__track--${c.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),L=r(()=>p(m.value===!0?1:e.value,s.value,n.$q)),z=r(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${a.value} q-linear-progress__model--${m.value===!0?"in":""}determinate`),N=r(()=>({width:`${e.value*100}%`})),D=r(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${a.value}`);return()=>{const k=[f("div",{class:w.value,style:_.value}),f("div",{class:z.value,style:L.value})];return e.stripe===!0&&m.value===!1&&k.push(f("div",{class:D.value,style:N.value})),f("div",{class:i.value,style:u.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},V(o.default,k))}}});const ce={__name:"BudgetMain",setup(e){const o=U(),n=Y(),c=W([]),d=()=>{o.loading.show(),Z().then(s=>{c.value=s.data,c.value.forEach(u=>{ee(u.id).then(i=>{u.usedBalance=i.data.usedBalance,u.balance=i.data.balance})})}).finally(()=>o.loading.hide())},m=s=>s.balance<=0?0:s.usedBalance==0&&s.balance>0?1:1-s.usedBalance/s.balance;return A(()=>n.event,d,{immediate:!0}),(s,u)=>{const i=B("nav-bar"),_=B("MainWrapperLayout");return g(),h(_,null,{default:l(()=>[t(R,null,{default:l(()=>[t(i,{"show-back":!1},{btn:l(()=>[t(y,{flat:"",dense:"",icon:"add",to:"/budgets/add"}),t(y,{flat:"",dense:"",icon:"sync",onClick:d})]),_:1}),t(O,{class:"q-px-md q-py-sm q-gutter-sm"},{default:l(()=>[(g(!0),G(H,null,K(c.value,a=>(g(),h(T,{key:a.id},{default:l(()=>[t(X,{clickable:"",to:`/budgets/${a.id}/transactions`},{default:l(()=>[t($,null,{default:l(()=>[t(q,null,{default:l(()=>[J(b(a.name),1)]),_:2},1024),t(q,{caption:"",class:"flex justify-between q-gutter-x-md"},{default:l(()=>[S("div",{class:C(v(x)(a.usedBalance==0?0:-1))}," \u5DF2\u7528\uFF1A"+b(v(Q)(a.usedBalance)),3),S("div",{class:C(v(x)(a.balance))}," \u7ED3\u4F59\uFF1A"+b(v(Q)(a.balance)),3),t(te,{size:"md",value:m(a)},null,8,["value"])]),_:2},1024)]),_:2},1024),t($,{side:""},{default:l(()=>[t(q,null,{default:l(()=>[t(y,{flat:"",dense:"",icon:"edit",to:`/budgets/${a.id}`},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}};export{ce as default};
