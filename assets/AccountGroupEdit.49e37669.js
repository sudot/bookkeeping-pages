import{B as C,r as p,ab as f,f as g,j as v,k as i,m as s,G as c,n as D,Q as V,q as A,t as G,Y as y,bk as k}from"./index.46a27899.js";import{Q}from"./QForm.143d2f76.js";import{Q as S}from"./QPage.7824d0da.js";import{u as E}from"./use-quasar.20dd07d7.js";import{g as R,s as $,d as q}from"./account-group.879321a1.js";import{u as I,A as b}from"./account-group.3c4ddb1d.js";import{u as N}from"./key.dfec5238.js";const L={__name:"AccountGroupEdit",setup(T){const{id:l,titlePrefix:B}=N(C().params.groupId),r=E(),d=I(),m=p(null),u=p(!1),a=p({id:l,name:void 0,currency:"CNY",notes:""});l&&R(l).then(e=>{a.value=e.data});const _=k(()=>{u.value=!0,$({...a.value}).then(({data:e})=>{r.notify(`\u5DF2\u6210\u529F\u4FDD\u5B58\u8D26\u6237\u7EC4:${a.value.name}`),d.publish({id:e},b.ADDED),m.value.goBack()}).catch(e=>{var t,n;r.notify({type:"negative",message:((n=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:n.message)||"\u4FDD\u5B58\u8D26\u6237\u7EC4\u5931\u8D25"})}).finally(()=>u.value=!1)},1e3),h=k(()=>{u.value=!0,q(l).then(()=>{r.notify(`\u5DF2\u5220\u9664\u8D26\u6237\u7EC4:${a.value.name}`),d.publish({id:l},b.DELETED),m.value.goBack()}).catch(e=>{var t,n;r.notify({type:"negative",message:((n=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:n.message)||"\u5220\u9664\u8D26\u6237\u7EC4\u5931\u8D25"})}).finally(()=>u.value=!1)},1e3);return(e,t)=>{const n=f("DeleteConfirmBtn"),x=f("nav-bar");return g(),v(S,null,{default:i(()=>[s(x,{ref_key:"navBarRef",ref:m},{btn:i(()=>[a.value.id?(g(),v(n,{key:0,loading:u.value,content:a.value.name,onClick:c(h)},null,8,["loading","content","onClick"])):D("",!0),s(V,{flat:"",round:"",icon:"save",loading:u.value,onClick:t[0]||(t[0]=o=>e.$refs.formRef.submit())},null,8,["loading"])]),default:i(()=>[A(G(c(B))+"\u5206\u7EC4 ",1)]),_:1},512),s(Q,{ref:"formRef",greedy:"",class:"q-pa-md q-gutter-y-md",onSubmit:c(_)},{default:i(()=>[s(y,{modelValue:a.value.name,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.name=o),"input-class":"text-right",prefix:"\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",dense:"","lazy-rules":"",rules:[o=>(o==null?void 0:o.length)||"\u8BF7\u8F93\u5165\u540D\u79F0"]},null,8,["modelValue","rules"]),s(y,{modelValue:a.value.notes,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.notes=o),"input-class":"text-right",prefix:"\u5907\u6CE8",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"textarea",dense:""},null,8,["modelValue"])]),_:1},8,["onSubmit"])]),_:1})}}};export{L as default};
