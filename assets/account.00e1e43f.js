import{aY as f,w as i}from"./index.46a27899.js";import{b as u}from"./currency.9051c79a.js";import{f as d}from"./account-group.879321a1.js";import{a as p,f as h}from"./transaction.45dcaa38.js";import{u as A}from"./account-group.3c4ddb1d.js";const N=Object.freeze({ADDED:1,UPDATED:2,DELETED:3}),l=f("account",{state:()=>({event:{data:void 0,type:void 0},groups:[],accounts:[],treeNodes:[],netAssetValue:0}),getters:{},actions:{publish(o,c){this.event={data:o,type:c}},fetchAccounts(){d().then(o=>{const c={},n=[];o.data.forEach(s=>{const e={...s,group:!0,children:[]};c[e.id]=e,n.push(e)}),h().then(s=>{s.data.forEach(t=>{t.groupId?c[t.groupId].children.push({...t,group:!1}):n.push({...t,group:!1})});let e=u(0);for(const t of n){if(t.children)for(const r of t.children)!r.includeInNetWorth||(t.balance=u(t.balance).add(r.balance));e=e.add(t.balance)}this.groups=o.data,this.accounts=s.data,this.treeNodes=n,this.netAssetValue=e})})}}}),a=l(),m=A(),g=p();i(()=>a.event,a.fetchAccounts,{immediate:!0});i(()=>[m.event,a.event,g.event],a.fetchAccounts,{immediate:!0});export{N as A,l as u};
